# 强缓存控制

强缓存是利用 HTTP 头中的 `Expires` 和 `Cache-Control` 两个字段来控制的：

- `Expires` 是 HTTP/1.0 的规范，指定资源过期的具体时间。
- `Cache-Control` 是 HTTP/1.1 引入的，更加灵活和强大，推荐使用。

---

## Cache-Control 常用字段

- **max-age**：资源可以被缓存的最长时间，单位为秒。
- **s-maxage**：与 `max-age` 类似，但只针对代理服务器缓存。
- **public**：响应可被任何缓存区缓存（包括浏览器和代理服务器）。
- **private**：响应仅针对单个用户缓存，代理服务器不可缓存。
- **no-cache**：强制客户端每次都向服务器验证资源是否更新，资源会被缓存，但必须先向服务器确认有效性（协商缓存机制）。
- **no-store**：禁止所有缓存，资源不会被缓存。

---

## 代码示例（Koa 框架）

```js
Router.get('/', async (ctx) => {
    const getResource = () => {
        return new Promise((res) => {
            fs.readFile("./fs/a.txt", (err, data) => {
                if (err) {
                    return;
                }
                res(data)
            })
        })
    }
    ctx.set('Cache-Control', 'max-age=10')  // 设置强缓存，缓存时间为10秒
    ctx.body = await getResource(); 
})
